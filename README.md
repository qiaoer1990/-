# -
数据库sql优化，读写分离，分库分表

sql优化 
一般理解为索引优化 对where条件进行添加索引操作
有索引失效的问题
1 隐式转换
2 OR的2边都要加索引才会生效
3 in  not in语句 用exist 替代
4 like elasticsearch倒排索引替代
索引虽好 但不能随意加
索引导致的问题
1插入insert会变慢
2索引有个索引表空间 会爆

关于联合索引 
假如建立了联合索引a,b,c
只对以下查询有优化效果
abc,ab,a
读写分离
一主一从 一主多从
主库写 从库读
存在主从延迟问题

解决方案 
1 核心交易 比如注册，支付 读也在主库 注意做防重机制 防止主库崩溃
2 涉及读+写的事务 在主库执行
3 从库 加ssd 改善网络



不归路之分库分表
mysql用mycat
oracle 只能自己干

表分区 按日期的比较多

分库分表策略
1强烈推荐按业务划分
如BC分离
2按技术划分
水平和垂直分表
垂直有left join问题 不考虑
水平 最简单的一种做法是分历史表 和 当前表





